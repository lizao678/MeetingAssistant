# 🚀 山源听悟 - 完整开发计划

## 📊 项目概览

**基于SenseVoice的现代化语音识别平台**
- **技术栈**: Vue 3 + TypeScript + Element Plus + Pinia + FastAPI
- **核心功能**: 实时语音转写、智能总结、说话人识别
- **目标**: 打造通义听悟级别的企业级语音识别解决方案

---

## ✅ 已完成的基础架构

### 🏗️ **前端架构**
- [x] Vue 3 + TypeScript 项目搭建
- [x] Element Plus 组件库集成
- [x] Vue Router 路由配置
- [x] Pinia 状态管理系统
- [x] 完整的服务层架构 (HTTP客户端、音频、录音、上传、AI服务)
- [x] TypeScript 类型定义系统

### 🎯 **已实现页面**
- [x] **实时转写页面** - WebSocket实时语音识别
- [x] **录音管理页面** - 卡片式布局，集成智能总结
- [x] **主布局系统** - 侧边栏导航，响应式设计

### 🔧 **后端服务**
- [x] SenseVoice实时语音识别服务 (已在127.0.0.1:26000运行)
- [x] 说话人识别模型 (CAM++)
- [x] VAD语音活动检测
- [x] 多语言支持 (7种语言)

---

## 📅 重新调整的开发计划时间线

### 🎯 **第一阶段：核心用户流程完善** (1-2周)

#### **🔥 优先级1: 录音停止后的完整用户流程** (Week 1: 5-7天)

**📱 停止录音弹窗设计**
- [ ] 发言人数选择弹窗组件
  - 数字选择器 (1-10人)
  - 录音信息预览 (时长、大小)
  - 确认/取消按钮
- [ ] 处理状态指示
  - 上传进度条
  - AI处理状态提示
  - 错误处理机制

**🎭 记录详情页开发 (核心页面)**
- [ ] 页面布局设计
  - 头部：录音标题、时间、时长
  - 左侧：智能速览区域
  - 右侧：原文显示区域
  - 底部：音频播放控制器

**📊 智能速览功能**
- [ ] 关键词提取显示
  - 标签云样式展示
  - 关键词点击定位功能
  - 词频统计可视化
- [ ] 全文摘要展示
  - AI生成的智能摘要
  - 摘要长度自适应
  - 摘要质量评分
- [ ] 章节速览 (如果录音较长)
  - 发言总结
  - 要点回顾
  - 时间节点标记

**📄 原文显示功能**
- [ ] 发言人区分显示
  - 不同说话人颜色标记
  - 发言人头像/标识
  - 时间戳精确显示
- [ ] 文本交互功能
  - 文本选择和复制
  - 关键词高亮
  - 段落跳转定位

**🎵 音频播放控制器**
- [ ] 基础播放功能
  - 播放/暂停按钮
  - 进度条拖拽
  - 音量控制
- [ ] 高级播放功能
  - 倍速播放 (0.5x, 1x, 1.25x, 1.5x, 2x)
  - 跳转播放 (前进/后退 15秒)
  - 波形可视化
- [ ] 文本同步功能
  - 播放时文本自动跟随
  - 点击文本跳转到对应音频位置
  - 段落播放功能

**📋 任务清单:**
```typescript
// 需要创建的新页面和组件
- RecordingDetailView.vue (记录详情页)
- SpeakerCountDialog.vue (发言人数选择弹窗)
- AudioPlayer.vue (音频播放器组件)  
- KeywordCloud.vue (关键词云组件)
- SummaryPanel.vue (摘要面板组件)
- TranscriptPanel.vue (原文面板组件)

// 需要的新API接口
- POST /api/recordings/process - 提交录音处理
- GET /api/recordings/{id}/detail - 获取录音详情
- GET /api/recordings/{id}/summary - 获取智能摘要
- GET /api/recordings/{id}/keywords - 获取关键词
```

#### **Week 2: 后端API和数据处理** (3-4天)

**🔥 优先级2: 后端录音处理流程**
- [ ] 录音文件存储和管理
- [ ] 说话人重新识别算法
- [ ] AI摘要生成接口
- [ ] 关键词提取算法
- [ ] 文本处理和格式化

**📊 数据库设计:**
```sql
-- 录音记录表
recordings (
  id, title, file_path, duration, speaker_count, 
  status, create_time, update_time
)

-- 发言段落表  
speech_segments (
  id, recording_id, speaker_id, content, 
  start_time, end_time, confidence
)

-- 智能摘要表
summaries (
  id, recording_id, summary_type, content, 
  create_time
)

-- 关键词表
keywords (
  id, recording_id, keyword, frequency, 
  importance_score
)
```

**🔧 API接口设计:**
```javascript
// 提交录音处理
POST /api/recordings/process
{
  audioFile: File,
  speakerCount: number,
  language: string
}

// 获取录音详情
GET /api/recordings/{id}/detail
{
  recording: {...},
  segments: [...],
  summary: {...},
  keywords: [...]
}
```

---

### 🎨 **第二阶段：用户体验优化** (1-2周)

#### **Week 3: 页面功能完善**

**🏠 首页Dashboard开发**
- [ ] 最近录音快速访问
- [ ] 统计数据展示
- [ ] 快捷操作面板

**📤 上传页面完善** 
- [ ] 与新的处理流程对接
- [ ] 批量上传支持
- [ ] 上传队列管理

**⚙️ 设置页面开发**
- [ ] 用户偏好设置
- [ ] 音频质量配置
- [ ] 存储管理

---

### 🤖 **第三阶段：高级功能** (1-2周)

#### **Week 4-5: AI功能增强**

**🧠 智能分析功能**
- [ ] 情感分析
- [ ] 话题演进分析
- [ ] 发言人活跃度统计

**📊 数据可视化**
- [ ] 词频云图
- [ ] 时间线可视化
- [ ] 统计图表

---

## 🛠️ 即将开始的任务

### **🔥 本周重点任务 (Week 1)**

1. **实时转写页面改造** (1天)
   - 修改停止录音逻辑
   - 添加发言人数选择弹窗
   - 集成提交处理流程

2. **记录详情页开发** (3-4天)
   - 页面布局和基础组件
   - 智能速览功能实现
   - 原文显示和交互

3. **音频播放器组件** (2天)
   - 基础播放控制
   - 高级功能实现
   - 文本同步功能

### **📊 成功指标**
- [ ] 用户能顺利完成录音→处理→查看详情的完整流程
- [ ] 记录详情页功能完整，体验接近通义听悟
- [ ] 音频播放与文本能够完美同步
- [ ] AI摘要和关键词提取准确有用

---

## 🎯 下一步行动

**立即开始的任务:**
1. **修改RealtimeView.vue** - 添加停止录音弹窗
2. **创建RecordingDetailView.vue** - 新建记录详情页
3. **设计后端处理API** - 录音提交和AI处理接口

**技术选型确认:**
- 音频播放器：使用 WaveSurfer.js (项目已依赖)
- 关键词云：使用 ECharts 词云图
- 文本处理：前端展示 + 后端AI分析

**开发顺序:**
1. 前端页面和组件开发 (并行进行)
2. 后端API接口开发
3. 前后端联调测试
4. 用户体验优化

---

**🎉 重点关注用户完整体验流程，确保每个环节都流畅自然！** 